% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/multisurvival.h.R
\name{multisurvival}
\alias{multisurvival}
\title{Multivariable Survival Analysis}
\usage{
multisurvival(
  data,
  elapsedtime,
  tint = FALSE,
  dxdate,
  fudate,
  timetypedata = "ymd",
  timetypeoutput = "months",
  uselandmark = FALSE,
  landmark = 3,
  outcome,
  outcomeLevel,
  dod,
  dooc,
  awd,
  awod,
  analysistype = "overall",
  explanatory,
  contexpl,
  multievent = FALSE,
  hr = FALSE,
  sty = "t1",
  ph_cox = FALSE,
  km = FALSE,
  endplot = 60,
  byplot = 12,
  ci95 = FALSE,
  risktable = FALSE,
  censored = FALSE,
  medianline = "none",
  pplot = TRUE,
  cutp = "12, 36, 60",
  calculateRiskScore = FALSE,
  numRiskGroups = "four",
  plotRiskGroups = FALSE,
  ac = FALSE,
  adjexplanatory,
  ac_method = "average",
  showNomogram = FALSE,
  use_modelSelection = FALSE,
  modelSelection = "enter",
  selectionCriteria = "aic",
  pEntry = 0.05,
  pRemoval = 0.1,
  use_stratify = FALSE,
  stratvar,
  person_time = FALSE,
  time_intervals = "12, 36, 60",
  rate_multiplier = 100,
  use_tree = FALSE,
  min_node = 20,
  complexity = 0.01,
  max_depth = 5,
  show_terminal_nodes = TRUE
)
}
\arguments{
\item{data}{The dataset to be analyzed, provided as a data frame. Must
contain the variables specified in the options below.}

\item{elapsedtime}{The numeric variable representing follow-up time until
the event or last observation. If \code{tint} = false, this should be a
pre-calculated numeric time variable. If \code{tint} = true, \code{dxdate}
and \code{fudate} will be used to calculate this time.}

\item{tint}{If true, survival time will be calculated from \code{dxdate}
and \code{fudate}. If false, \code{elapsedtime} should be provided as a
pre-calculated numeric variable.}

\item{dxdate}{Date of diagnosis. Required if \code{tint} = true. Must match
the format specified in \code{timetypedata}.}

\item{fudate}{Follow-up date or date of last observation. Required if
\code{tint} = true. Must match the format specified in \code{timetypedata}.}

\item{timetypedata}{Specifies the format of the date variables in the input
data. This is critical if \code{tint = true}, as \code{dxdate} and
\code{fudate} will be parsed according to this format to calculate survival
time. For example, if your data files record dates as "YYYY-MM-DD", select
\code{ymd}.}

\item{timetypeoutput}{The units in which survival time is reported in the
output. Choose from days, weeks, months, or years.}

\item{uselandmark}{If true, applies a landmark analysis starting at a
specified time point.}

\item{landmark}{The time point (in the units defined by
\code{timetypeoutput}) at which to start landmark analyses. Only used if
\code{uselandmark} = true.}

\item{outcome}{The outcome variable. Typically indicates event status
(e.g., death, recurrence). For survival analysis, this may be a factor or
numeric event indicator.}

\item{outcomeLevel}{The level of \code{outcome} considered as the event.
For example, if \code{outcome} is a factor, specify which level indicates
the event occurrence.}

\item{dod}{The level of \code{outcome} corresponding to death due to
disease, if applicable.}

\item{dooc}{The level of \code{outcome} corresponding to death due to other
causes, if applicable.}

\item{awd}{The level of \code{outcome} corresponding to alive with disease,
if applicable.}

\item{awod}{The level of \code{outcome} corresponding to alive without
disease, if applicable.}

\item{analysistype}{Type of survival analysis: - overall: All-cause
survival - cause: Cause-specific survival - compete: Competing risks
analysis}

\item{explanatory}{Categorical explanatory (predictor) variables included
in the Cox model.}

\item{contexpl}{Continuous explanatory (predictor) variables included in
the Cox model.}

\item{multievent}{If true, multiple event levels will be considered for
competing risks analysis. Requires specifying \code{dod}, \code{dooc}, etc.}

\item{hr}{If true, generates a plot of hazard ratios for each explanatory
variable in the Cox model.}

\item{sty}{The style of the hazard ratio (forest) plot. "finalfit" or
"survminer forestplot".}

\item{ph_cox}{If true, tests the proportional hazards assumption for the
Cox model. Use if you suspect violations of the PH assumption.}

\item{km}{If true, produces a Kaplan-Meier survival plot. Useful for
visualization of survival functions without covariate adjustment.}

\item{endplot}{The maximum follow-up time (in units defined by
\code{timetypeoutput}) to display on survival plots.}

\item{byplot}{The interval (in units defined by \code{timetypeoutput}) at
which time points or labels are shown on plots.}

\item{ci95}{If true, displays 95\\% confidence intervals around the survival
estimates on plots.}

\item{risktable}{If true, displays the number of subjects at risk at each
time point below the survival plot.}

\item{censored}{If true, marks censored observations (e.g., using tick
marks) on the survival plot.}

\item{medianline}{If true, displays a line indicating the median survival
time on the survival plot.}

\item{pplot}{If true, displays the p-value from the survival comparison
test on the survival plot.}

\item{cutp}{.}

\item{calculateRiskScore}{If true, calculates a risk score from the Cox
model coefficients for each individual.}

\item{numRiskGroups}{Select the number of risk groups to create from the
risk scores. The data will be divided into equal quantiles based on this
selection.}

\item{plotRiskGroups}{If true, stratifies individuals into risk groups
based on their calculated risk scores and plots their survival curves.}

\item{ac}{.}

\item{adjexplanatory}{.}

\item{ac_method}{Method for computing adjusted survival curves}

\item{showNomogram}{.}

\item{use_modelSelection}{If true, applies a variable selection procedure
to find the best-fitting model based on criteria like AIC or likelihood
ratio tests.}

\item{modelSelection}{The method used to select variables: - enter:
Includes all variables (no selection) - forward: Adds variables one at a
time if they improve the model - backward: Removes variables that do not
significantly contribute - both: Combination of forward and backward steps}

\item{selectionCriteria}{The criterion used for adding or removing
variables in model selection: - aic: Balances model fit and complexity -
lrt: Uses likelihood ratio tests to decide inclusion/removal}

\item{pEntry}{Significance level at which a variable enters the model
during forward or stepwise selection.}

\item{pRemoval}{Significance level at which a variable is removed from the
model during backward or stepwise selection.}

\item{use_stratify}{If true, uses stratification to handle variables that
violate the proportional hazards assumption. Stratification creates
separate baseline hazard functions for different groups.}

\item{stratvar}{Variables used for stratification. When proportional
hazards are not met, stratification can adjust the model to better fit the
data by allowing different baseline hazards.}

\item{person_time}{Enable this option to calculate and display person-time
metrics, including total follow-up time and incidence rates. These metrics
help quantify the rate of events per unit of time in your study population.}

\item{time_intervals}{Specify time intervals for stratified person-time
analysis. Enter a  comma-separated list of time points to create intervals.
For example,  "12, 36, 60" will create intervals 0-12, 12-36, 36-60, and
60+.}

\item{rate_multiplier}{Specify the multiplier for incidence rates (e.g.,
100 for rates per 100 person-years, 1000 for rates per 1000 person-years).}

\item{use_tree}{If true, fits a survival decision tree to identify
subgroups with different survival outcomes. Decision trees provide an
intuitive alternative to Cox regression for identifying risk factors.}

\item{min_node}{The minimum number of observations required in a terminal
node. Larger values create simpler trees that may be more generalizable but
potentially miss important subgroups.}

\item{complexity}{The complexity parameter for tree pruning. Higher values
result in smaller trees. This parameter controls the trade-off between tree
size and goodness of fit.}

\item{max_depth}{The maximum depth of the decision tree. Limits the
complexity of the tree to avoid overfitting.}

\item{show_terminal_nodes}{If true, displays Kaplan-Meier survival curves
for each terminal node of the decision tree.}
}
\value{
A results object containing:
\tabular{llllll}{
\code{results$todo} \tab \tab \tab \tab \tab a html \cr
\code{results$text} \tab \tab \tab \tab \tab a html \cr
\code{results$text2} \tab \tab \tab \tab \tab a html \cr
\code{results$personTimeTable} \tab \tab \tab \tab \tab a table \cr
\code{results$personTimeSummary} \tab \tab \tab \tab \tab a html \cr
\code{results$plot} \tab \tab \tab \tab \tab an image \cr
\code{results$plot3} \tab \tab \tab \tab \tab an image \cr
\code{results$cox_ph} \tab \tab \tab \tab \tab a preformatted \cr
\code{results$plot8} \tab \tab \tab \tab \tab an image \cr
\code{results$plotKM} \tab \tab \tab \tab \tab an image \cr
\code{results$risk_score_analysis} \tab \tab \tab \tab \tab a preformatted \cr
\code{results$risk_score_analysis2} \tab \tab \tab \tab \tab a html \cr
\code{results$riskScoreTable} \tab \tab \tab \tab \tab a table \cr
\code{results$riskScoreMetrics} \tab \tab \tab \tab \tab a html \cr
\code{results$riskGroupPlot} \tab \tab \tab \tab \tab an image \cr
\code{results$stratificationExplanation} \tab \tab \tab \tab \tab a html \cr
\code{results$calculatedtime} \tab \tab \tab \tab \tab an output \cr
\code{results$outcomeredefined} \tab \tab \tab \tab \tab an output \cr
\code{results$addRiskScore} \tab \tab \tab \tab \tab an output \cr
\code{results$addRiskGroup} \tab \tab \tab \tab \tab an output \cr
\code{results$plot_adj} \tab \tab \tab \tab \tab an image \cr
\code{results$plot_nomogram} \tab \tab \tab \tab \tab an image \cr
\code{results$nomogram_display} \tab \tab \tab \tab \tab a html \cr
\code{results$tree_summary} \tab \tab \tab \tab \tab a html \cr
\code{results$tree_plot} \tab \tab \tab \tab \tab an image \cr
\code{results$node_survival_plots} \tab \tab \tab \tab \tab an image \cr
\code{results$mydataview_modelselection} \tab \tab \tab \tab \tab a preformatted \cr
\code{results$text_model_selection} \tab \tab \tab \tab \tab a html \cr
\code{results$selection_method} \tab \tab \tab \tab \tab a html \cr
\code{results$text2_model_selection} \tab \tab \tab \tab \tab a html \cr
}

Tables can be converted to data frames with \code{asDF} or \code{\link{as.data.frame}}. For example:

\code{results$personTimeTable$asDF}

\code{as.data.frame(results$personTimeTable)}
}
\description{
Performs multivariable survival analysis using Cox proportional hazards
regression. In multivariable survival analysis, person-time follow-up is
crucial for properly adjusting for covariates while accounting for varying
observation periods. The Cox proportional hazards model incorporates
person-time by modeling the hazard function, which represents the
instantaneous event rate per unit of person-time. When stratifying analyses
or examining multiple predictors, the model accounts for how these factors
influence event rates relative to the person-time at risk in each subgroup.
}
\examples{
\donttest{
# example will be added
}
}
