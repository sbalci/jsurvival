% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/stagemigration.h.R
\name{stagemigration}
\alias{stagemigration}
\title{Advanced TNM Stage Migration Analysis}
\usage{
stagemigration(
  data,
  oldStage,
  newStage,
  survivalTime,
  event,
  eventLevel,
  analysisType = "comprehensive",
  confidenceLevel = 0.95,
  calculateNRI = TRUE,
  nriTimePoints = "12, 24, 60",
  calculateIDI = TRUE,
  performROCAnalysis = TRUE,
  rocTimePoints = "12, 24, 36, 60",
  performDCA = TRUE,
  performCalibration = TRUE,
  performBootstrap = TRUE,
  bootstrapReps = 1000,
  performCrossValidation = FALSE,
  cvFolds = 5,
  clinicalSignificanceThreshold = 0.02,
  nriClinicalThreshold = 0.2,
  performHomogeneityTests = TRUE,
  performTrendTests = TRUE,
  performLikelihoodTests = TRUE,
  calculatePseudoR2 = TRUE,
  showMigrationHeatmap = TRUE,
  showROCComparison = TRUE,
  showCalibrationPlots = TRUE,
  showDecisionCurves = TRUE,
  showForestPlot = TRUE,
  showWillRogersAnalysis = TRUE,
  survivalPlotType = "separate",
  showConfidenceIntervals = TRUE,
  showRiskTables = TRUE,
  plotTimeRange = "auto",
  showClinicalInterpretation = TRUE,
  showStatisticalSummary = TRUE,
  showMethodologyNotes = TRUE,
  includeEffectSizes = TRUE,
  generateExecutiveSummary = TRUE,
  cancerType = "general",
  useOptimismCorrection = TRUE
)
}
\arguments{
\item{data}{The dataset containing staging and survival information for TNM
validation analysis.}

\item{oldStage}{The original staging variable (e.g., TNM 7th edition, AJCC
7th edition). Should be coded as ordered factor with appropriate stage
levels.}

\item{newStage}{The proposed new staging variable (e.g., TNM 8th edition,
revised staging). Should use the same coding structure as the original
staging system.}

\item{survivalTime}{Time to event or censoring in consistent units (months
recommended). For overall survival analysis, use time from diagnosis to
death or last follow-up.}

\item{event}{Event indicator (1 = event occurred, 0 = censored) or factor
with event levels. For overall survival, event = death from any cause.}

\item{eventLevel}{The level indicating event occurrence when using factor
variables.}

\item{analysisType}{Determines the scope of statistical analysis performed.
Comprehensive analysis includes all available methods for thorough staging
system validation.}

\item{confidenceLevel}{Confidence level for all confidence intervals and
hypothesis tests.}

\item{calculateNRI}{Calculate Net Reclassification Improvement to quantify
improvement in  risk classification between staging systems. Essential for
staging validation.}

\item{nriTimePoints}{Comma-separated time points for NRI calculation (e.g.,
"12, 24, 60" for  1, 2, and 5-year survival). Use clinically relevant time
points.}

\item{calculateIDI}{Calculate Integrated Discrimination Improvement to
measure improvement  in risk prediction accuracy between staging systems.}

\item{performROCAnalysis}{Perform time-dependent ROC analysis to compare
discriminative ability of staging systems over time.}

\item{rocTimePoints}{Time points for ROC analysis. Should include
clinically important survival milestones for the specific cancer type.}

\item{performDCA}{Perform Decision Curve Analysis to assess clinical
utility and net benefit of the new staging system for clinical decision
making.}

\item{performCalibration}{Assess calibration of risk predictions from both
staging systems. Important for validating accuracy of survival predictions.}

\item{performBootstrap}{Perform bootstrap validation with optimism
correction to assess internal validity of results. Recommended for all
staging validation studies.}

\item{bootstrapReps}{Number of bootstrap repetitions for internal
validation.  1000 repetitions recommended for stable results.}

\item{performCrossValidation}{Perform k-fold cross-validation for
additional validation. Computationally intensive but provides robust
validation.}

\item{cvFolds}{Number of folds for cross-validation when enabled.}

\item{clinicalSignificanceThreshold}{Minimum improvement in C-index
considered clinically significant. Default 0.02 based on oncology
literature recommendations.}

\item{nriClinicalThreshold}{Minimum NRI improvement considered clinically
meaningful. Default 0.20 (20\\% net reclassification improvement).}

\item{performHomogeneityTests}{Test homogeneity within stages and monotonic
trend across stages. Essential for validating stage ordering and grouping.}

\item{performTrendTests}{Test for monotonic trend in survival across stage
levels. Validates that higher stages consistently have worse prognosis.}

\item{performLikelihoodTests}{Perform formal likelihood ratio tests
comparing nested staging models. Provides statistical significance testing
for staging improvement.}

\item{calculatePseudoR2}{Calculate multiple pseudo R-squared measures for
model comparison (Nagelkerke, McFadden, Cox-Snell).}

\item{showMigrationHeatmap}{Display detailed heatmap showing migration
patterns between staging systems.}

\item{showROCComparison}{Display time-dependent ROC curves comparing
staging systems.}

\item{showCalibrationPlots}{Display calibration plots for both staging
systems.}

\item{showDecisionCurves}{Display decision curves showing net benefit of
staging systems.}

\item{showForestPlot}{Display forest plot with stage-specific hazard ratios
and confidence intervals.}

\item{showWillRogersAnalysis}{Detailed analysis of Will Rogers phenomenon
with survival comparisons between migrated and non-migrated patients within
stages.}

\item{survivalPlotType}{Controls display of survival curves for staging
system comparison.}

\item{showConfidenceIntervals}{Display confidence intervals around survival
curves and other estimates.}

\item{showRiskTables}{Display at-risk tables below survival curves.}

\item{plotTimeRange}{Maximum time for survival plots. Use "auto" for
automatic range or specify maximum months (e.g., "60" for 5-year
follow-up).}

\item{showClinicalInterpretation}{Display comprehensive clinical
interpretation of all statistical results with guidance for staging system
adoption decisions.}

\item{showStatisticalSummary}{Display comprehensive table summarizing all
statistical comparisons.}

\item{showMethodologyNotes}{Display detailed notes on statistical methods
used and their interpretation.}

\item{includeEffectSizes}{Calculate and display effect sizes for all
comparisons to assess practical significance beyond statistical
significance.}

\item{generateExecutiveSummary}{Generate executive summary with key
findings and recommendations for clinical and research stakeholders.}

\item{cancerType}{Optional cancer type specification for customized
thresholds and  interpretation guidelines based on cancer-specific
literature.}

\item{useOptimismCorrection}{Apply optimism correction to performance
metrics using bootstrap validation to avoid overly optimistic estimates.}
}
\value{
A results object containing:
\tabular{llllll}{
\code{results$todo} \tab \tab \tab \tab \tab a html \cr
\code{results$migrationSummary} \tab \tab \tab \tab \tab a table \cr
\code{results$stageDistribution} \tab \tab \tab \tab \tab a table \cr
\code{results$migrationTable} \tab \tab \tab \tab \tab a table \cr
\code{results$survivalComparison} \tab \tab \tab \tab \tab a table \cr
\code{results$stagingPerformance} \tab \tab \tab \tab \tab a table \cr
\code{results$migrationPlot} \tab \tab \tab \tab \tab an image \cr
\code{results$survivalPlot} \tab \tab \tab \tab \tab an image \cr
\code{results$concordancePlot} \tab \tab \tab \tab \tab an image \cr
}

Tables can be converted to data frames with \code{asDF} or \code{\link{as.data.frame}}. For example:

\code{results$migrationSummary$asDF}

\code{as.data.frame(results$migrationSummary)}
}
\description{
Comprehensive analysis for validating TNM staging system improvements using
state-of-the-art  statistical methods. This analysis provides pathologists
with robust tools to evaluate whether  a new staging system provides
superior prognostic discrimination compared to existing systems.
Includes advanced metrics: Net Reclassification Improvement (NRI),
Integrated Discrimination  Improvement (IDI), time-dependent ROC analysis,
decision curve analysis, bootstrap validation,  and comprehensive clinical
interpretation guidance.
}
\examples{
\donttest{
# Example analyzing TNM staging system migration:
# stagemigration(
#   data = cancer_cohort,
#   oldStage = "tnm7_stage",
#   newStage = "tnm8_stage",
#   survivalTime = "os_months",
#   event = "death_status",
#   eventLevel = "Dead",
#   analysisType = "comprehensive",
#   calculateNRI = TRUE,
#   calculateIDI = TRUE,
#   performBootstrap = TRUE,
#   bootstrapReps = 1000
# )
}
}
