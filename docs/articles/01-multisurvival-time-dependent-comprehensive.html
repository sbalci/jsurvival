<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Time-Dependent Covariates in Multisurvival Analysis • jsurvival</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Time-Dependent Covariates in Multisurvival Analysis">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">jsurvival</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.0.32.01</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="../articles/01-introduction-user-friendly.html">A Clinician's Guide to Survival Analysis with jSurvival in jamovi</a></li>
    <li><a class="dropdown-item" href="../articles/01-introduction.html">jSurvival 01: Introduction to Survival Analysis for Pathologists</a></li>
    <li><a class="dropdown-item" href="../articles/01-multisurvival-time-dependent-comprehensive.html">Time-Dependent Covariates in Multisurvival Analysis</a></li>
    <li><a class="dropdown-item" href="../articles/02-person-time-analysis.html">Person-Time Analysis in jSurvival Module</a></li>
    <li><a class="dropdown-item" href="../articles/03-clinical-examples.html">Clinical Research Examples with jSurvival</a></li>
    <li><a class="dropdown-item" href="../articles/03-treatment-response.html">Treatment Response Analysis in Oncology</a></li>
    <li><a class="dropdown-item" href="../articles/04-stage-migration-analysis.html">Stage Migration Analysis: Understanding the Will Rogers Phenomenon</a></li>
    <li><a class="dropdown-item" href="../articles/05-jamovi-workflow-user-friendly.html">A Step-by-Step Guide to Survival Analysis in jamovi with jSurvival</a></li>
    <li><a class="dropdown-item" href="../articles/05-jamovi-workflow.html">Using jSurvival in jamovi: Complete Workflow</a></li>
    <li><a class="dropdown-item" href="../articles/05-treatment-pathway-visualization.html">Treatment Pathway Visualization with alluvialSurvival</a></li>
    <li><a class="dropdown-item" href="../articles/07-use-in-r.html">Use jSurvival in R</a></li>
    <li><a class="dropdown-item" href="../articles/08-advanced-topics.html">Advanced Survival Analysis with jSurvival</a></li>
    <li><a class="dropdown-item" href="../articles/08-groupedforest-comprehensive.html">Grouped Hazard Forest Plots for Subgroup Analysis</a></li>
    <li><a class="dropdown-item" href="../articles/legacy/08-stage-migration-analysis-legacy.html">Stage Migration Analysis: Understanding the Will Rogers Phenomenon</a></li>
    <li><a class="dropdown-item" href="../articles/09-lassocox-comprehensive.html">Lasso-Cox Regression for Variable Selection in Survival Analysis</a></li>
    <li><a class="dropdown-item" href="../articles/1-stagemigration-comprehensive.html">Advanced TNM Stage Migration Analysis: A Comprehensive Guide</a></li>
    <li><a class="dropdown-item" href="../articles/legacy/10-introduction-legacy.html">jsurvival: Introduction to Survival Analysis for Clinical Research</a></li>
    <li><a class="dropdown-item" href="../articles/11-data-preparation.html">Data Preparation for Survival Analysis</a></li>
    <li><a class="dropdown-item" href="../articles/legacy/11-person-time-analysis-legacy.html">Person-Time Analysis in jsurvival Module</a></li>
    <li><a class="dropdown-item" href="../articles/legacy/12-treatment-response-analysis-legacy.html">Treatment Response Analysis in Oncology</a></li>
    <li><a class="dropdown-item" href="../articles/legacy/13-use-in-r-legacy.html">Use jsurvival in R</a></li>
    <li><a class="dropdown-item" href="../articles/14-comparing-survival-user-friendly.html">Comparing Survival Outcomes Between Groups: A Clinician's Guide</a></li>
    <li><a class="dropdown-item" href="../articles/14-comparing-survival.html">jSurvival 14: Comparing Survival Outcomes Between Groups</a></li>
    <li><a class="dropdown-item" href="../articles/15-competing-survival-user-friendly.html">Understanding Competing Risks in Survival Analysis: A Simple Guide</a></li>
    <li><a class="dropdown-item" href="../articles/15-competing-survival.html">jSurvival 15: Competing Survival Analysis</a></li>
    <li><a class="dropdown-item" href="../articles/16-cox-model-diagnostics.html">jSurvival 16: Cox Proportional Hazards Model Diagnostics</a></li>
    <li><a class="dropdown-item" href="../articles/17-jiwillsurvive-comprehensive.html">Intuitive Survival Analysis with jiwillsurvive</a></li>
    <li><a class="dropdown-item" href="../articles/18-cox-brief-for-clinicians.html">Cox Regression, Briefly: A Clinician’s Guide</a></li>
    <li><a class="dropdown-item" href="../articles/legacy/19-clinical-examples-legacy.html">Clinical Research Examples with jsurvival</a></li>
    <li><a class="dropdown-item" href="../articles/legacy/22-advanced-topics-legacy.html">Advanced Survival Analysis with jsurvival</a></li>
    <li><a class="dropdown-item" href="../articles/legacy/23-data-preparation-legacy.html">Data Preparation for Survival Analysis</a></li>
    <li><a class="dropdown-item" href="../articles/legacy/26-jamovi-workflow-legacy.html">Using jsurvival in jamovi: Complete Workflow</a></li>
    <li><a class="dropdown-item" href="../articles/jsurvival-01-oncodatasets-examples.html">jSurvival: Survival Analysis with Oncology Data</a></li>
    <li><a class="dropdown-item" href="../articles/jsurvival-02-comprehensive-survival-power-analysis.html">Comprehensive Survival Power Analysis with ClinicoPath</a></li>
  </ul>
</li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/sbalci/ClinicoPathJamoviModule/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Time-Dependent Covariates in Multisurvival Analysis</h1>
                        <h4 data-toc-skip class="author">ClinicoPath
Team</h4>
            
            <h4 data-toc-skip class="date">2025-10-09</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/sbalci/ClinicoPathJamoviModule/blob/HEAD/vignettes/01-multisurvival-time-dependent-comprehensive.Rmd" class="external-link"><code>vignettes/01-multisurvival-time-dependent-comprehensive.Rmd</code></a></small>
      <div class="d-none name"><code>01-multisurvival-time-dependent-comprehensive.Rmd</code></div>
    </div>

    
    
<div class="section level2">
<h2 id="introduction">Introduction<a class="anchor" aria-label="anchor" href="#introduction"></a>
</h2>
<p>Time-dependent covariates are variables that change their values over
the course of follow-up time. In clinical research, many important
variables can change during the study period, such as:</p>
<ul>
<li>Treatment regimens (switching from standard to experimental
therapy)</li>
<li>Disease status (remission, progression)</li>
<li>Performance status</li>
<li>Biomarker levels</li>
<li>Comorbidities</li>
</ul>
<p>The <code>multisurvival</code> function in ClinicoPath now supports
time-dependent covariates in both wide and long data formats, making it
easier to analyze survival data where covariates change over time.</p>
</div>
<div class="section level2">
<h2 id="data-formats">Data Format Options<a class="anchor" aria-label="anchor" href="#data-formats"></a>
</h2>
<div class="section level3">
<h3 id="wide-format">Wide Format Data<a class="anchor" aria-label="anchor" href="#wide-format"></a>
</h3>
<p>In wide format, each subject has one row, with time-dependent
variables represented as separate columns for different time points.</p>
<div class="section level4">
<h4 id="example-wide-format-structure">Example Wide Format Structure<a class="anchor" aria-label="anchor" href="#example-wide-format-structure"></a>
</h4>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Example wide format data structure</span></span>
<span><span class="va">wide_data</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span></span>
<span>  id <span class="op">=</span> <span class="fl">1</span><span class="op">:</span><span class="fl">3</span>,</span>
<span>  age <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">65</span>, <span class="fl">72</span>, <span class="fl">58</span><span class="op">)</span>,</span>
<span>  sex <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html" class="external-link">factor</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Male"</span>, <span class="st">"Female"</span>, <span class="st">"Male"</span><span class="op">)</span><span class="op">)</span>,</span>
<span>  time <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">24</span>, <span class="fl">18</span>, <span class="fl">30</span><span class="op">)</span>,</span>
<span>  status <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">0</span>, <span class="fl">1</span><span class="op">)</span>,</span>
<span>  </span>
<span>  <span class="co"># Baseline treatment (time 0)</span></span>
<span>  treatment_baseline <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html" class="external-link">factor</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Standard"</span>, <span class="st">"Standard"</span>, <span class="st">"Experimental"</span><span class="op">)</span><span class="op">)</span>,</span>
<span>  </span>
<span>  <span class="co"># Treatment at 6 months</span></span>
<span>  treatment_t6 <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html" class="external-link">factor</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Standard"</span>, <span class="st">"Experimental"</span>, <span class="st">"Experimental"</span><span class="op">)</span><span class="op">)</span>,</span>
<span>  </span>
<span>  <span class="co"># Treatment at 12 months  </span></span>
<span>  treatment_t12 <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html" class="external-link">factor</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Experimental"</span>, <span class="st">"Experimental"</span>, <span class="st">"Stopped"</span><span class="op">)</span><span class="op">)</span>,</span>
<span>  </span>
<span>  <span class="co"># Treatment at 18 months</span></span>
<span>  treatment_t18 <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html" class="external-link">factor</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Experimental"</span>, <span class="st">"Stopped"</span>, <span class="st">"Stopped"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">wide_data</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">##   id age    sex time status treatment_baseline treatment_t6 treatment_t12</span></span>
<span><span class="co">## 1  1  65   Male   24      1           Standard     Standard  Experimental</span></span>
<span><span class="co">## 2  2  72 Female   18      0           Standard Experimental  Experimental</span></span>
<span><span class="co">## 3  3  58   Male   30      1       Experimental Experimental       Stopped</span></span>
<span><span class="co">##   treatment_t18</span></span>
<span><span class="co">## 1  Experimental</span></span>
<span><span class="co">## 2       Stopped</span></span>
<span><span class="co">## 3       Stopped</span></span></code></pre>
<p><strong>Wide Format Advantages:</strong> - One row per patient
(easier to understand) - Common format in clinical databases - Easy to
create from existing data</p>
<p><strong>Wide Format Requirements:</strong> - Baseline variables:
<code>variable_baseline</code> or just <code>variable</code> -
Time-specific variables: <code>variable_t6</code>,
<code>variable_t12</code>, etc. - Change times specified in options</p>
</div>
</div>
<div class="section level3">
<h3 id="long-format">Long Format Data<a class="anchor" aria-label="anchor" href="#long-format"></a>
</h3>
<p>In long format, each subject can have multiple rows, with one row for
each time interval where covariates remain constant.</p>
<div class="section level4">
<h4 id="example-long-format-structure">Example Long Format Structure<a class="anchor" aria-label="anchor" href="#example-long-format-structure"></a>
</h4>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Example long format data structure  </span></span>
<span><span class="va">long_data</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span></span>
<span>  id <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">1</span>, <span class="fl">1</span>, <span class="fl">2</span>, <span class="fl">2</span>, <span class="fl">3</span>, <span class="fl">3</span><span class="op">)</span>,</span>
<span>  age <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">65</span>, <span class="fl">65</span>, <span class="fl">65</span>, <span class="fl">72</span>, <span class="fl">72</span>, <span class="fl">58</span>, <span class="fl">58</span><span class="op">)</span>,</span>
<span>  sex <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html" class="external-link">factor</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Male"</span>, <span class="st">"Male"</span>, <span class="st">"Male"</span>, <span class="st">"Female"</span>, <span class="st">"Female"</span>, <span class="st">"Male"</span>, <span class="st">"Male"</span><span class="op">)</span><span class="op">)</span>,</span>
<span>  tstart <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">6</span>, <span class="fl">12</span>, <span class="fl">0</span>, <span class="fl">6</span>, <span class="fl">0</span>, <span class="fl">12</span><span class="op">)</span>,</span>
<span>  tstop <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">6</span>, <span class="fl">12</span>, <span class="fl">24</span>, <span class="fl">6</span>, <span class="fl">18</span>, <span class="fl">12</span>, <span class="fl">30</span><span class="op">)</span>,</span>
<span>  status <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">0</span>, <span class="fl">1</span>, <span class="fl">0</span>, <span class="fl">0</span>, <span class="fl">0</span>, <span class="fl">1</span><span class="op">)</span>,</span>
<span>  treatment <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html" class="external-link">factor</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Standard"</span>, <span class="st">"Standard"</span>, <span class="st">"Experimental"</span>, </span>
<span>                      <span class="st">"Standard"</span>, <span class="st">"Experimental"</span>, <span class="st">"Experimental"</span>, <span class="st">"Stopped"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">long_data</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">##   id age    sex tstart tstop status    treatment</span></span>
<span><span class="co">## 1  1  65   Male      0     6      0     Standard</span></span>
<span><span class="co">## 2  1  65   Male      6    12      0     Standard</span></span>
<span><span class="co">## 3  1  65   Male     12    24      1 Experimental</span></span>
<span><span class="co">## 4  2  72 Female      0     6      0     Standard</span></span>
<span><span class="co">## 5  2  72 Female      6    18      0 Experimental</span></span>
<span><span class="co">## 6  3  58   Male      0    12      0 Experimental</span></span>
<span><span class="co">## 7  3  58   Male     12    30      1      Stopped</span></span></code></pre>
<p><strong>Long Format Advantages:</strong> - More flexible for complex
time patterns - Standard format for survival analysis packages - Can
handle irregular time intervals</p>
<p><strong>Long Format Requirements:</strong> - <code>tstart</code> and
<code>tstop</code> variables for time intervals - Status = 1 only in
final interval if event occurs - Time-dependent variables change between
rows</p>
</div>
</div>
</div>
<div class="section level2">
<h2 id="usage">Using Time-Dependent Covariates<a class="anchor" aria-label="anchor" href="#usage"></a>
</h2>
<div class="section level3">
<h3 id="basic-wide">Basic Wide Format Analysis<a class="anchor" aria-label="anchor" href="#basic-wide"></a>
</h3>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va">ClinicoPath</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Load example wide format data</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/load.html" class="external-link">load</a></span><span class="op">(</span><span class="st">"test_wide_time_dependent.rda"</span><span class="op">)</span></span>
<span></span>
<span><span class="va">result</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/multisurvival.html">multisurvival</a></span><span class="op">(</span></span>
<span>  data <span class="op">=</span> <span class="va">test_wide_time_dependent</span>,</span>
<span>  elapsedtime <span class="op">=</span> <span class="st">"time"</span>,</span>
<span>  outcome <span class="op">=</span> <span class="st">"status"</span>, </span>
<span>  outcomeLevel <span class="op">=</span> <span class="st">"1"</span>,</span>
<span>  explanatory <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"sex"</span>, <span class="st">"stage"</span><span class="op">)</span>,</span>
<span>  contexpl <span class="op">=</span> <span class="st">"age"</span>,</span>
<span>  </span>
<span>  <span class="co"># Time-dependent covariate options</span></span>
<span>  use_time_dependent <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  td_format <span class="op">=</span> <span class="st">"wide"</span>,</span>
<span>  time_dep_vars <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"treatment_baseline"</span><span class="op">)</span>,  <span class="co"># Base variable name</span></span>
<span>  change_times <span class="op">=</span> <span class="st">"6, 12, 18"</span>,               <span class="co"># When changes occur</span></span>
<span>  td_suffix_pattern <span class="op">=</span> <span class="st">"_t{time}"</span>,           <span class="co"># Naming pattern</span></span>
<span>  </span>
<span>  timetypeoutput <span class="op">=</span> <span class="st">"months"</span></span>
<span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="basic-long">Basic Long Format Analysis<a class="anchor" aria-label="anchor" href="#basic-long"></a>
</h3>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Load example long format data</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/load.html" class="external-link">load</a></span><span class="op">(</span><span class="st">"test_long_time_dependent.rda"</span><span class="op">)</span></span>
<span></span>
<span><span class="va">result</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/multisurvival.html">multisurvival</a></span><span class="op">(</span></span>
<span>  data <span class="op">=</span> <span class="va">test_long_time_dependent</span>,</span>
<span>  </span>
<span>  <span class="co"># No elapsedtime needed - using tstart/tstop</span></span>
<span>  outcome <span class="op">=</span> <span class="st">"status"</span>,</span>
<span>  outcomeLevel <span class="op">=</span> <span class="st">"1"</span>, </span>
<span>  explanatory <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"sex"</span>, <span class="st">"stage"</span><span class="op">)</span>,</span>
<span>  contexpl <span class="op">=</span> <span class="st">"age"</span>,</span>
<span>  </span>
<span>  <span class="co"># Time-dependent covariate options</span></span>
<span>  use_time_dependent <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  td_format <span class="op">=</span> <span class="st">"long"</span>, </span>
<span>  start_time_var <span class="op">=</span> <span class="st">"tstart"</span>,</span>
<span>  stop_time_var <span class="op">=</span> <span class="st">"tstop"</span>,</span>
<span>  time_dep_vars <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"treatment"</span><span class="op">)</span>,  <span class="co"># Time-varying variable</span></span>
<span>  </span>
<span>  timetypeoutput <span class="op">=</span> <span class="st">"months"</span></span>
<span><span class="op">)</span></span></code></pre></div>
</div>
</div>
<div class="section level2">
<h2 id="advanced-examples">Advanced Examples<a class="anchor" aria-label="anchor" href="#advanced-examples"></a>
</h2>
<div class="section level3">
<h3 id="multiple-td">Multiple Time-Dependent Variables<a class="anchor" aria-label="anchor" href="#multiple-td"></a>
</h3>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Wide format with multiple time-dependent variables</span></span>
<span><span class="va">result</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/multisurvival.html">multisurvival</a></span><span class="op">(</span></span>
<span>  data <span class="op">=</span> <span class="va">clinical_data</span>,</span>
<span>  elapsedtime <span class="op">=</span> <span class="st">"followup_months"</span>,</span>
<span>  outcome <span class="op">=</span> <span class="st">"event_status"</span>,</span>
<span>  outcomeLevel <span class="op">=</span> <span class="st">"Event"</span>,</span>
<span>  explanatory <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"sex"</span>, <span class="st">"initial_stage"</span><span class="op">)</span>,</span>
<span>  contexpl <span class="op">=</span> <span class="st">"baseline_age"</span>,</span>
<span>  </span>
<span>  <span class="co"># Multiple time-dependent variables</span></span>
<span>  use_time_dependent <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  td_format <span class="op">=</span> <span class="st">"wide"</span>,</span>
<span>  time_dep_vars <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"treatment_baseline"</span>, <span class="st">"ps_baseline"</span><span class="op">)</span>,  <span class="co"># Multiple variables</span></span>
<span>  change_times <span class="op">=</span> <span class="st">"3, 6, 12, 18"</span>,           <span class="co"># More frequent assessments</span></span>
<span>  td_suffix_pattern <span class="op">=</span> <span class="st">"_month{time}"</span>,       <span class="co"># Different naming pattern</span></span>
<span>  </span>
<span>  <span class="co"># Additional analysis options</span></span>
<span>  calculateRiskScore <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  numRiskGroups <span class="op">=</span> <span class="st">"three"</span>,</span>
<span>  hr <span class="op">=</span> <span class="cn">TRUE</span></span>
<span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="combined">Combining Time-Dependent Covariates with Other Features<a class="anchor" aria-label="anchor" href="#combined"></a>
</h3>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Complex analysis with multiple advanced features</span></span>
<span><span class="va">result</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/multisurvival.html">multisurvival</a></span><span class="op">(</span></span>
<span>  data <span class="op">=</span> <span class="va">oncology_data</span>,</span>
<span>  elapsedtime <span class="op">=</span> <span class="st">"survival_months"</span>, </span>
<span>  outcome <span class="op">=</span> <span class="st">"vital_status"</span>,</span>
<span>  outcomeLevel <span class="op">=</span> <span class="st">"Dead"</span>,</span>
<span>  explanatory <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"histology"</span>, <span class="st">"grade"</span><span class="op">)</span>,</span>
<span>  contexpl <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"age_at_diagnosis"</span>, <span class="st">"tumor_size"</span><span class="op">)</span>,</span>
<span>  </span>
<span>  <span class="co"># Time-dependent covariates</span></span>
<span>  use_time_dependent <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  td_format <span class="op">=</span> <span class="st">"wide"</span>,</span>
<span>  time_dep_vars <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"treatment_baseline"</span>, <span class="st">"response_baseline"</span><span class="op">)</span>,</span>
<span>  change_times <span class="op">=</span> <span class="st">"6, 12, 24"</span>,</span>
<span>  td_suffix_pattern <span class="op">=</span> <span class="st">"_m{time}"</span>,</span>
<span>  </span>
<span>  <span class="co"># Frailty model for hospital clustering</span></span>
<span>  use_frailty <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  frailty_var <span class="op">=</span> <span class="st">"treatment_center"</span>,</span>
<span>  frailty_distribution <span class="op">=</span> <span class="st">"gamma"</span>,</span>
<span>  </span>
<span>  <span class="co"># Splines for non-proportional hazards</span></span>
<span>  use_splines <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  spline_vars <span class="op">=</span> <span class="st">"age_at_diagnosis"</span>,</span>
<span>  spline_df <span class="op">=</span> <span class="fl">3</span>,</span>
<span>  spline_type <span class="op">=</span> <span class="st">"pspline"</span>,</span>
<span>  </span>
<span>  <span class="co"># Model selection</span></span>
<span>  use_modelSelection <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  modelSelection <span class="op">=</span> <span class="st">"backward"</span>,</span>
<span>  selectionCriteria <span class="op">=</span> <span class="st">"aic"</span>,</span>
<span>  </span>
<span>  <span class="co"># Risk stratification</span></span>
<span>  calculateRiskScore <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  numRiskGroups <span class="op">=</span> <span class="st">"four"</span>,</span>
<span>  plotRiskGroups <span class="op">=</span> <span class="cn">TRUE</span></span>
<span><span class="op">)</span></span></code></pre></div>
</div>
</div>
<div class="section level2">
<h2 id="data-prep">Data Preparation Guidelines<a class="anchor" aria-label="anchor" href="#data-prep"></a>
</h2>
<div class="section level3">
<h3 id="long-to-wide">Converting Long to Wide Format<a class="anchor" aria-label="anchor" href="#long-to-wide"></a>
</h3>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Example conversion from long to wide format</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org" class="external-link">dplyr</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://tidyr.tidyverse.org" class="external-link">tidyr</a></span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Starting with long format data</span></span>
<span><span class="va">long_format</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span></span>
<span>  patient_id <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">3</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="fl">2</span>, <span class="fl">2</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="fl">3</span>, <span class="fl">4</span><span class="op">)</span><span class="op">)</span>,</span>
<span>  visit_month <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">6</span>, <span class="fl">12</span>, <span class="fl">0</span>, <span class="fl">6</span>, <span class="fl">0</span>, <span class="fl">6</span>, <span class="fl">12</span>, <span class="fl">18</span><span class="op">)</span>,</span>
<span>  treatment <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"A"</span>, <span class="st">"A"</span>, <span class="st">"B"</span>, <span class="st">"A"</span>, <span class="st">"B"</span>, <span class="st">"A"</span>, <span class="st">"A"</span>, <span class="st">"A"</span>, <span class="st">"B"</span><span class="op">)</span>,</span>
<span>  performance_status <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">1</span>, <span class="fl">1</span>, <span class="fl">0</span>, <span class="fl">0</span>, <span class="fl">0</span>, <span class="fl">1</span>, <span class="fl">2</span>, <span class="fl">2</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Convert to wide format</span></span>
<span><span class="va">wide_format</span> <span class="op">&lt;-</span> <span class="va">long_format</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://tidyr.tidyverse.org/reference/pivot_wider.html" class="external-link">pivot_wider</a></span><span class="op">(</span></span>
<span>    id_cols <span class="op">=</span> <span class="va">patient_id</span>,</span>
<span>    names_from <span class="op">=</span> <span class="va">visit_month</span>,</span>
<span>    values_from <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="va">treatment</span>, <span class="va">performance_status</span><span class="op">)</span>,</span>
<span>    names_sep <span class="op">=</span> <span class="st">"_t"</span></span>
<span>  <span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="co"># Rename baseline variables</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/rename.html" class="external-link">rename</a></span><span class="op">(</span></span>
<span>    treatment_baseline <span class="op">=</span> <span class="va">treatment_t0</span>,</span>
<span>    ps_baseline <span class="op">=</span> <span class="va">performance_status_t0</span></span>
<span>  <span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="wide-to-long">Converting Wide to Long Format<a class="anchor" aria-label="anchor" href="#wide-to-long"></a>
</h3>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Example conversion from wide to long format</span></span>
<span><span class="va">wide_data</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span></span>
<span>  id <span class="op">=</span> <span class="fl">1</span><span class="op">:</span><span class="fl">100</span>,</span>
<span>  age <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/Normal.html" class="external-link">rnorm</a></span><span class="op">(</span><span class="fl">100</span>, <span class="fl">65</span>, <span class="fl">10</span><span class="op">)</span>,</span>
<span>  sex <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html" class="external-link">factor</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/sample.html" class="external-link">sample</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"M"</span>, <span class="st">"F"</span><span class="op">)</span>, <span class="fl">100</span>, replace <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span><span class="op">)</span>,</span>
<span>  survival_time <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/Exponential.html" class="external-link">rexp</a></span><span class="op">(</span><span class="fl">100</span>, <span class="fl">0.01</span><span class="op">)</span>,</span>
<span>  status <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/Binomial.html" class="external-link">rbinom</a></span><span class="op">(</span><span class="fl">100</span>, <span class="fl">1</span>, <span class="fl">0.3</span><span class="op">)</span>,</span>
<span>  treatment_baseline <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html" class="external-link">factor</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/sample.html" class="external-link">sample</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"A"</span>, <span class="st">"B"</span><span class="op">)</span>, <span class="fl">100</span>, replace <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span><span class="op">)</span>,</span>
<span>  treatment_t6 <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html" class="external-link">factor</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/sample.html" class="external-link">sample</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"A"</span>, <span class="st">"B"</span>, <span class="st">"C"</span><span class="op">)</span>, <span class="fl">100</span>, replace <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span><span class="op">)</span>,</span>
<span>  treatment_t12 <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html" class="external-link">factor</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/sample.html" class="external-link">sample</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"A"</span>, <span class="st">"B"</span>, <span class="st">"C"</span>, <span class="st">"Stop"</span><span class="op">)</span>, <span class="fl">100</span>, replace <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># This conversion would typically be done by the multisurvival function</span></span>
<span><span class="co"># when td_format = "wide" is specified</span></span></code></pre></div>
</div>
</div>
<div class="section level2">
<h2 id="clinical-applications">Clinical Applications<a class="anchor" aria-label="anchor" href="#clinical-applications"></a>
</h2>
<div class="section level3">
<h3 id="cancer-treatment">Cancer Treatment Switching<a class="anchor" aria-label="anchor" href="#cancer-treatment"></a>
</h3>
<p>Time-dependent covariates are particularly useful in oncology:</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Analyze impact of treatment switching in cancer patients</span></span>
<span><span class="va">cancer_analysis</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/multisurvival.html">multisurvival</a></span><span class="op">(</span></span>
<span>  data <span class="op">=</span> <span class="va">cancer_cohort</span>,</span>
<span>  elapsedtime <span class="op">=</span> <span class="st">"overall_survival_months"</span>,</span>
<span>  outcome <span class="op">=</span> <span class="st">"death_status"</span>, </span>
<span>  outcomeLevel <span class="op">=</span> <span class="st">"Dead"</span>,</span>
<span>  explanatory <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"cancer_type"</span>, <span class="st">"stage_at_diagnosis"</span><span class="op">)</span>,</span>
<span>  contexpl <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"age_at_diagnosis"</span>, <span class="st">"baseline_performance_status"</span><span class="op">)</span>,</span>
<span>  </span>
<span>  <span class="co"># Treatment changes over time</span></span>
<span>  use_time_dependent <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  td_format <span class="op">=</span> <span class="st">"wide"</span>,</span>
<span>  time_dep_vars <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"primary_treatment_baseline"</span><span class="op">)</span>,</span>
<span>  change_times <span class="op">=</span> <span class="st">"3, 6, 12, 18, 24"</span>,  <span class="co"># Quarterly assessments</span></span>
<span>  td_suffix_pattern <span class="op">=</span> <span class="st">"_quarter{time}"</span>,</span>
<span>  </span>
<span>  <span class="co"># Account for treatment center effects</span></span>
<span>  use_frailty <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  frailty_var <span class="op">=</span> <span class="st">"treatment_center"</span>,</span>
<span>  </span>
<span>  <span class="co"># Test proportional hazards assumption</span></span>
<span>  ph_cox <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  </span>
<span>  <span class="co"># Generate comprehensive outputs</span></span>
<span>  hr <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  calculateRiskScore <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  person_time <span class="op">=</span> <span class="cn">TRUE</span></span>
<span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="cardiovascular">Cardiovascular Risk Factors<a class="anchor" aria-label="anchor" href="#cardiovascular"></a>
</h3>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Analyze changing cardiovascular risk factors</span></span>
<span><span class="va">cv_analysis</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/multisurvival.html">multisurvival</a></span><span class="op">(</span></span>
<span>  data <span class="op">=</span> <span class="va">cardiovascular_study</span>,</span>
<span>  tint <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  dxdate <span class="op">=</span> <span class="st">"enrollment_date"</span>,</span>
<span>  fudate <span class="op">=</span> <span class="st">"last_contact_date"</span>,</span>
<span>  timetypedata <span class="op">=</span> <span class="st">"ymd"</span>,</span>
<span>  timetypeoutput <span class="op">=</span> <span class="st">"years"</span>,</span>
<span>  outcome <span class="op">=</span> <span class="st">"cv_event"</span>,</span>
<span>  outcomeLevel <span class="op">=</span> <span class="st">"Yes"</span>,</span>
<span>  explanatory <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"gender"</span>, <span class="st">"diabetes_baseline"</span><span class="op">)</span>,</span>
<span>  contexpl <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"baseline_age"</span>, <span class="st">"baseline_bmi"</span><span class="op">)</span>,</span>
<span>  </span>
<span>  <span class="co"># Time-varying medication and lab values</span></span>
<span>  use_time_dependent <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  td_format <span class="op">=</span> <span class="st">"wide"</span>, </span>
<span>  time_dep_vars <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"statin_use_baseline"</span>, <span class="st">"bp_medication_baseline"</span><span class="op">)</span>,</span>
<span>  change_times <span class="op">=</span> <span class="st">"0.5, 1, 2, 3, 4, 5"</span>,  <span class="co"># Annual visits</span></span>
<span>  td_suffix_pattern <span class="op">=</span> <span class="st">"_year{time}"</span>,</span>
<span>  </span>
<span>  <span class="co"># Account for clinic clustering</span></span>
<span>  use_frailty <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  frailty_var <span class="op">=</span> <span class="st">"clinic_id"</span>,</span>
<span>  frailty_distribution <span class="op">=</span> <span class="st">"gamma"</span></span>
<span><span class="op">)</span></span></code></pre></div>
</div>
</div>
<div class="section level2">
<h2 id="interpretation">Interpretation Guidelines<a class="anchor" aria-label="anchor" href="#interpretation"></a>
</h2>
<div class="section level3">
<h3 id="td-effects">Understanding Time-Dependent Effects<a class="anchor" aria-label="anchor" href="#td-effects"></a>
</h3>
<p>When interpreting results with time-dependent covariates:</p>
<ol style="list-style-type: decimal">
<li><p><strong>Hazard Ratios</strong>: Represent the instantaneous risk
at any given time, accounting for the current value of time-dependent
variables.</p></li>
<li><p><strong>Model Fit</strong>: Time-dependent models often fit
better than static models but require more data and
assumptions.</p></li>
<li><p><strong>Causality</strong>: Time-dependent covariates help
address time-varying confounding but don’t guarantee causal
interpretation.</p></li>
</ol>
</div>
<div class="section level3">
<h3 id="pitfalls">Common Pitfalls<a class="anchor" aria-label="anchor" href="#pitfalls"></a>
</h3>
<ol style="list-style-type: decimal">
<li><p><strong>Immortal Time Bias</strong>: Ensure time-dependent
variables are properly aligned with risk periods.</p></li>
<li><p><strong>Missing Data</strong>: Handle missing time-dependent
measurements appropriately.</p></li>
<li><p><strong>Measurement Timing</strong>: Consider whether variable
changes are known at the time of measurement or
retrospectively.</p></li>
</ol>
</div>
</div>
<div class="section level2">
<h2 id="technical">Technical Considerations<a class="anchor" aria-label="anchor" href="#technical"></a>
</h2>
<div class="section level3">
<h3 id="wide-requirements">Wide Format Requirements<a class="anchor" aria-label="anchor" href="#wide-requirements"></a>
</h3>
<ul>
<li>Consistent naming pattern for time-dependent variables</li>
<li>Complete specification of change times</li>
<li>Baseline values for all time-dependent variables</li>
</ul>
</div>
<div class="section level3">
<h3 id="long-requirements">Long Format Requirements<a class="anchor" aria-label="anchor" href="#long-requirements"></a>
</h3>
<ul>
<li>Proper <code>tstart</code>/<code>tstop</code> intervals with no
gaps</li>
<li>Status = 1 only in final interval for events</li>
<li>Consistent covariate values within intervals</li>
</ul>
</div>
<div class="section level3">
<h3 id="performance">Performance Considerations<a class="anchor" aria-label="anchor" href="#performance"></a>
</h3>
<ul>
<li>Wide format is generally faster for simple patterns</li>
<li>Long format is more flexible but computationally intensive</li>
<li>Consider data size when choosing format</li>
</ul>
</div>
</div>
<div class="section level2">
<h2 id="integration">Advanced Features Integration<a class="anchor" aria-label="anchor" href="#integration"></a>
</h2>
<p>Time-dependent covariates work seamlessly with other advanced
features:</p>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Comprehensive analysis combining all advanced features</span></span>
<span><span class="va">comprehensive_analysis</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/multisurvival.html">multisurvival</a></span><span class="op">(</span></span>
<span>  data <span class="op">=</span> <span class="va">complex_dataset</span>,</span>
<span>  elapsedtime <span class="op">=</span> <span class="st">"time_to_event"</span>,</span>
<span>  outcome <span class="op">=</span> <span class="st">"event_indicator"</span>,</span>
<span>  outcomeLevel <span class="op">=</span> <span class="st">"1"</span>,</span>
<span>  explanatory <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"treatment_arm"</span>, <span class="st">"biomarker_status"</span><span class="op">)</span>,</span>
<span>  contexpl <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"age"</span>, <span class="st">"baseline_score"</span><span class="op">)</span>,</span>
<span>  </span>
<span>  <span class="co"># Time-dependent covariates</span></span>
<span>  use_time_dependent <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  td_format <span class="op">=</span> <span class="st">"wide"</span>,</span>
<span>  time_dep_vars <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"drug_dose_baseline"</span>, <span class="st">"toxicity_grade_baseline"</span><span class="op">)</span>,</span>
<span>  change_times <span class="op">=</span> <span class="st">"4, 8, 12, 16, 20, 24"</span>,</span>
<span>  </span>
<span>  <span class="co"># Frailty for center effects</span></span>
<span>  use_frailty <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  frailty_var <span class="op">=</span> <span class="st">"study_center"</span>,</span>
<span>  frailty_distribution <span class="op">=</span> <span class="st">"gamma"</span>,</span>
<span>  </span>
<span>  <span class="co"># Splines for non-linear age effects</span></span>
<span>  use_splines <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  spline_vars <span class="op">=</span> <span class="st">"age"</span>,</span>
<span>  spline_df <span class="op">=</span> <span class="fl">4</span>,</span>
<span>  spline_type <span class="op">=</span> <span class="st">"ns"</span>,</span>
<span>  </span>
<span>  <span class="co"># Stratification for non-proportional hazards</span></span>
<span>  use_stratify <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  stratvar <span class="op">=</span> <span class="st">"biomarker_status"</span>,</span>
<span>  </span>
<span>  <span class="co"># Model selection</span></span>
<span>  use_modelSelection <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  modelSelection <span class="op">=</span> <span class="st">"both"</span>,</span>
<span>  selectionCriteria <span class="op">=</span> <span class="st">"aic"</span>,</span>
<span>  </span>
<span>  <span class="co"># Risk assessment</span></span>
<span>  calculateRiskScore <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  numRiskGroups <span class="op">=</span> <span class="st">"four"</span>,</span>
<span>  plotRiskGroups <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  </span>
<span>  <span class="co"># Comprehensive outputs</span></span>
<span>  hr <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  km <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  ac <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  adjexplanatory <span class="op">=</span> <span class="st">"treatment_arm"</span>,</span>
<span>  person_time <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  ph_cox <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  showNomogram <span class="op">=</span> <span class="cn">TRUE</span></span>
<span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="conclusion">Conclusion<a class="anchor" aria-label="anchor" href="#conclusion"></a>
</h2>
<p>Time-dependent covariates in <code>multisurvival</code> provide a
powerful tool for analyzing survival data where important variables
change over time. The support for both wide and long data formats makes
this functionality accessible to researchers working with different data
structures.</p>
<p>Key benefits include:</p>
<ul>
<li>
<strong>Realistic modeling</strong> of clinical scenarios where
treatments and patient status change</li>
<li>
<strong>Flexible data input</strong> supporting both wide and long
formats<br>
</li>
<li>
<strong>Integration</strong> with other advanced survival analysis
features</li>
<li>
<strong>Comprehensive output</strong> including plots, tables, and
model diagnostics</li>
</ul>
<p>For most clinical applications, wide format provides the most
intuitive approach, while long format offers maximum flexibility for
complex time patterns.</p>
<div class="section level3">
<h3 id="further-reading">Further Reading<a class="anchor" aria-label="anchor" href="#further-reading"></a>
</h3>
<ul>
<li>Therneau, T.M. and Grambsch, P.M. (2000). <em>Modeling Survival
Data: Extending the Cox Model</em>. Springer.</li>
<li>Kleinbaum, D.G. and Klein, M. (2012). <em>Survival Analysis: A
Self-Learning Text</em>. Springer.</li>
<li>ClinicoPath package documentation and examples.</li>
</ul>
</div>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Serdar Balci.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

    </footer>
</div>





  </body>
</html>
